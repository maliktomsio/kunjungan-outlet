<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sales Order</title>

<style>
body{
  background:#0e1621;
  color:white;
  font-family:system-ui;
}
.app{
  max-width:420px;
  margin:auto;
  padding:10px;
}
.card{
  background:#16202a;
  padding:10px;
  border-radius:8px;
  margin-bottom:10px;
}
select,input{
  width:100%;
  padding:8px;
  margin-top:5px;
  background:#0e1621;
  color:white;
  border:1px solid #2a3;
  border-radius:6px;
}
.row{
  display:grid;
  grid-template-columns:2fr 1fr 1fr;
  gap:5px;
  margin-top:6px;
}
.btn{
  background:#2a3;
  border:none;
  padding:8px;
  width:100%;
  border-radius:6px;
  margin-top:10px;
}
</style>
</head>

<body>
<div class="app">

<h3>ORDER OUTLET</h3>

<div class="card">

<label>Pilih Rute</label>
<select id="rute" onchange="loadOutlet()">
<option value="SEBRANG1">SEBRANG 1</option>
<option value="PASAR1">PASAR 1</option>
</select>

<label>Outlet</label>
<select id="outlet"></select>

<label>Tanggal</label>
<input type="date" id="tgl">
</div>

<div class="card">
  <input
  type="text"
  placeholder="üîç Cari produk..."
  onkeyup="filterProduk(this.value)"
  style="margin-bottom:10px"
/>
<div id="list"></div>
<button class="btn" onclick="tambah()">+ Tambah Produk</button>
</div>

<div class="card">
<h3>Total : Rp <span id="total">0</span></h3>
</div>

</div>

<script>
// ===== DATA RUTE SESUAI GAMBAR KAMU =====
const ruteDB = {

SEBRANG1:[
"A088 ‚Äì AMELIA BAKEKO",
"A095 ‚Äì AMOR KIOS",
"A120 ‚Äì AGORA TIMUR NUSANTARA",
"A124 ‚Äì AZIZAH KIOS",
"A129 ‚Äì APRI KIOS SEBRANG",
"D029 ‚Äì DILA KIOS",
"D044 ‚Äì DILLA KIOS PASIR PANJANG",
"E004 ‚Äì EMMI TAN BU",
"H040 ‚Äì HENDRO KOLAM AIR BESAR",
"I042 ‚Äì IBU HASNI NASKUN",
"J012 ‚Äì JOKO MAS",
"K018 ‚Äì KODAR MAS",
"K055 ‚Äì KIOS IRMA",
"M085 ‚Äì MAULANA KIOS",
"N003 ‚Äì NANDO",
"P032 ‚Äì PUTRA SOLO",
"R038 ‚Äì RS MISI SEBRANG",
"S050 ‚Äì SUMBER REJEKI PASIR PANJANG",
"S076 ‚Äì SINAR MERAPI",
"S091 ‚Äì SINAR MUDA KIOS (EBA)",
"S092 ‚Äì KANTIN SMAN 2 (SLAMET)",
"S111 ‚Äì SABYAN KIOS",
"S160 ‚Äì SIMPANG TIGA KIOS",
"T002 ‚Äì ANTO KIOS",
"Y014 ‚Äì YULI BAKEKO",
"F002 ‚Äì FADJRIN",
"R024 ‚Äì ROMAIKA KIOS",
"S037 ‚Äì SOKIMIN SEBRANG",
"D010 ‚Äì DICKY SEBRANG",
"A111 ‚Äì ALKA KIOS",
"B064 ‚Äì BEACHES CAFE"
],

PASAR1:[
"M077 ‚Äì MAMA PIPIN",
"W024 ‚Äì WA ODE MUTIARA BU",
"W034 ‚Äì WA ODE PASAR IKAN",
"S149 ‚Äì SCANVENGER",
"S110 ‚Äì SINAR ONING KIOS",
"S106 ‚Äì SASA MAMA ( RIDHO )",
"L018 ‚Äì LA ARIFIN PURNAMA ILAHI",
"L012 ‚Äì LA AFI",
"K052 ‚Äì WARUNG ES KASTIA",
"I043 ‚Äì IKA BAPAK ( PENJUAL PLASTIK )",
"H065 ‚Äì HARSUCI PESONA",
"H073 ‚Äì HENDRA THUMBURUNI",
"K051 ‚Äì KAYLA KIOS",
"E015 ‚Äì EVI MAMA",
"M110 ‚Äì MURNI KIOS (PASAR)",
"A145 ‚Äì ARI THUMBURUNI",
"S164 ‚Äì SINAR MANIS THUMBURUNI",
"A141 ‚Äì ANDALAS TOKO",
"C004 ‚Äì CAHAYA BARU",
"C005 ‚Äì CAHAYA MUTIARA ( HARTATI )",
"R016 ‚Äì ROS THUMBURUNI BU",
"N016 ‚Äì NURSULITAMA RUKO/RASA SAYANG MM",
"M056 ‚Äì MERIA MM",
"R032 ‚Äì RIA JAYA",
"W039 ‚Äì WARUNG NONA",
"B058 ‚Äì BUNDA WARUNG RUKO",
"C025 ‚Äì COTO MAKASSAR PASAR JALBAR",
"I019 ‚Äì IRIAN THUMBURUNI",
"I025 ‚Äì NASIR BU",
"O006 ‚Äì OPAN BAPAK",
"M111 ‚Äì MARDIAN"
]

};
// ===== END RUTE =====


// ===== PRODUK DARI PDF (TIDAK DIUBAH) =====
const produk = [
{nama:"FIBE MINI 24 X 110ML", pcs:5775, krt:138600},
{nama:"ORONAMIN C DRINK BOTOL 24 X 120ML", pcs:5250, krt:126000},
{nama:"POCARI SWEAT CAN 24 X 330ML", pcs:4850, krt:116400},
{nama:"POCARI SWEAT ION WATER PET 24 X 350ML", pcs:5250, krt:126000},
{nama:"POCARI SWEAT ION WATER PET 24 X 500ML", pcs:6250, krt:150000},
{nama:"POCARI SWEAT PET 15 X 900ML", pcs:10350, krt:155250},
{nama:"POCARI SWEAT PET 24 X 350ML", pcs:5250, krt:126000},
{nama:"POCARI SWEAT PET 24 X 500ML", pcs:6250, krt:150000},
{nama:"SOYJOY CHOCOLATE ALMOND 4 X 12 X 30GR", pcs:8025, krt:385200},
{nama:"SOYJOY DANISH CHEESE 4 X 12 X 28GR", pcs:8025, krt:385200},
{nama:"SOYJOY FRUIT BAR RAISIN ALMOND 4 X 12 X 30GR", pcs:8025, krt:385200},
{nama:"SOYJOY FRUIT BAR STRAWBERRY 4 X 12 X 30GR", pcs:8025, krt:385200},
{nama:"SOYJOY LEKKER AND NUTS 4 X 12 X 28GR", pcs:8025, krt:385200},
{nama:"SOYJOY TROPICAL CRANBERRIES 4 X 12 X 30GR", pcs:8025, krt:385200},
{nama:"FRUITAMIN COCOBIT KELAPA MUDA 180ML", pcs:1062, krt:25488},
{nama:"FRUITAMIN COCOBIT LYCHEE CUP", pcs:1062, krt:25488},
{nama:"FRUITAMIN STRAWBERRY 180ML", pcs:1062, krt:25488},
{nama:"KOPITA CAPPUCINO CUP 140ML", pcs:1125, krt:27000},
{nama:"TEKITA MELATI CUP 160ML", pcs:1062, krt:25488},
{nama:"CAP KAKI TIGA ANAK LYCHEE CAN 24 X 250ML", pcs:5167, krt:124008},
{nama:"CAP KAKI TIGA ANAK ORANGE CAN 24 X 250ML", pcs:5167, krt:124008},
{nama:"CAP KAKI TIGA ANAK ORANGE PET 24 X 250ML", pcs:5167, krt:124008},
{nama:"CAP KAKI TIGA ANAK STRAWBERY CAN 24 X 250ML", pcs:5167, krt:124008},
{nama:"CAP KAKI TIGA COOLTOPIA LEMON LIME CAN 24 X 320ML", pcs:5417, krt:130008},
{nama:"CAP KAKI TIGA GRAPE CAN 24 X 320ML", pcs:5417, krt:130008},
{nama:"CAP KAKI TIGA GUAVA CAN 24 X 320ML", pcs:5417, krt:130008},
{nama:"CAP KAKI TIGA GUAVA PET 24 X 320ML", pcs:5708, krt:136992},
{nama:"CAP KAKI TIGA JERUK NIPIS CAN 24 X 320ML", pcs:5417, krt:130008},
{nama:"CAP KAKI TIGA LYCHEE CAN 24 X 320ML", pcs:5417, krt:130008},
{nama:"CAP KAKI TIGA LYCHEE PET 24 X 320ML", pcs:5708, krt:136992},
{nama:"CAP KAKI TIGA MARKISA CAN 24 X 320ML", pcs:5417, krt:130008},
{nama:"CAP KAKI TIGA MELON CAN 24 X 320ML", pcs:5417, krt:130008},
{nama:"CAP KAKI TIGA ORANGE CAN 24 X 320ML", pcs:5417, krt:130008},
{nama:"CAP KAKI TIGA ORANGE PET 24 X 320ML", pcs:5708, krt:136992},
{nama:"CAP KAKI TIGA PLAIN (ORI) BTL 24 X 500ML", pcs:6667, krt:160008},
{nama:"CAP KAKI TIGA PLAIN (ORI) PET 48 X 200ML", pcs:3271, krt:157008},
{nama:"CAP KAKI TIGA STRAWBERY CAN 24 X 320ML", pcs:5417, krt:130008},
{nama:"CAP PANDA BIRD NEST WRAP CAN 24 X 310ML", pcs:5000, krt:120000},
{nama:"CAP PANDA CINCAU SELASIH CAN 24 X 310ML", pcs:5000, krt:120000},
{nama:"CAP PANDA GRASS JELLY WRAP CAN 24 X 310ML", pcs:5000, krt:120000},
{nama:"CAP PANDA LIANG TEH WRAP CAN 24 X 310ML", pcs:5000, krt:120000},
{nama:"ABS CHAMOMILE 150ML BTL", pcs:50000, krt:1800000},
{nama:"ABS INTIMACY 150ML BTL", pcs:47600, krt:1713600},
{nama:"ABSTRACT EYELASH F01 VIBRANT BOX", pcs:8578, krt:857800},
{nama:"ABSTRACT EYELASH F05 BOHEMIAN BOX", pcs:8578, krt:857800},
{nama:"ABSTRACT EYELASH F06 CASUAL BOX", pcs:8578, krt:857800},
{nama:"ABSTRACT EYELASH F07 EDGY BOX", pcs:8578, krt:857800},
{nama:"ABSTRACT EYELASH N03 ANEMONE BOX", pcs:8578, krt:857800},
{nama:"ABSTRACT EYELASH N04 IRIS BOX", pcs:8578, krt:857800},
{nama:"ABSTRACT EYELASH N05 ESTER BOX", pcs:8578, krt:857800},
{nama:"ABSTRACT EYELASH N09 MALVA BOX", pcs:8578, krt:857800},
{nama:"ABSTRACT EYELASH N10 FREESIA BOX", pcs:8578, krt:857800},
{nama:"ABSTRACT EYELASH P02 ELECTRIC VEEL", pcs:18164, krt:1816400},
{nama:"B&B HBW RAINBOW DASH 280ML BTL", pcs:21200, krt:508800},
{nama:"B&B HBW RIKO 200ML PCH", pcs:12600, krt:302400},
{nama:"B&B HBW SMOOTH PINKIE 280ML BTL", pcs:21200, krt:508800},
{nama:"B&B PWD BLOSSOM 150GR BTL", pcs:10650, krt:383400},
{nama:"B&B SHM & COND KIWI BUTTERCUP 200ML BTL", pcs:14700, krt:529200},
{nama:"B&B SHM & COND ORANGE BUBBLES 100ML BTL", pcs:8000, krt:288000},
{nama:"B&B SHM & COND ORANGE BUBBLES 200ML BTL", pcs:14700, krt:529200},
{nama:"B&B SHM & COND RAINBOW DASH 200ML BTL", pcs:14700, krt:529200},
{nama:"B&B SHM & COND STRAW BLOSSOM 200ML BTL", pcs:14700, krt:529200},
{nama:"B&B T PASTE & T BRUSH RIKO 45GR", pcs:4950, krt:237600},
{nama:"B&B T PASTE MLP PINKIE PIE 50GR", pcs:6700, krt:321600},
{nama:"B&B T PASTE POWERPUFF GIRLS 50GR TUBE", pcs:6700, krt:321600},
{nama:"ELLIPS H MIST FRESH SMOOTH 100ML BTL", pcs:22000, krt:396000},
{nama:"ELLIPS H MIST SWEET SILKY 100ML BTL", pcs:22000, krt:396000},
{nama:"ELLIPS HM HAIR TREATMENT 200GR JAR", pcs:45000, krt:540000},
{nama:"ELLIPS HM NUTRI COLOR 200GR JAR", pcs:45000, krt:540000},
{nama:"ELLIPS HM NUTRICOLOR 20GR SCH", pcs:7000, krt:504000},
{nama:"ELLIPS HM SMOOTH SHINY 20GR SCH", pcs:7000, krt:504000},
{nama:"ELLIPS HM VOLUME MIRACLE 20GR SCH", pcs:7000, krt:504000},
{nama:"ELLIPS HV HAIR TREATMENT 1ML BLR", pcs:11300, krt:813600},
{nama:"ELLIPS HV HAIR TREATMENT 1ML JAR", pcs:78100, krt:937200},
{nama:"ELLIPS HV HAIR VITALITY 1 ML JAR", pcs:78100, krt:937200},
{nama:"ELLIPS HV HAIR VITALITY 1ML BLR", pcs:11300, krt:813600},
{nama:"ELLIPS HV KERATIN HAIR REPAIR 1ML BLR", pcs:11300, krt:813600},
{nama:"ELLIPS HV KERATIN SMOOTH & SILKY 1ML JAR", pcs:78100, krt:937200},
{nama:"ELLIPS HV NUTRICOLOR 1ML JAR", pcs:78100, krt:937200},
{nama:"ELLIPS HV PERAWATAN RAMBUT RUSAK BLR", pcs:26350, krt:1264800},
{nama:"ELLIPS HV PRWTN R. HITAM 1ML MINI BLR", pcs:26350, krt:1264800},
{nama:"ELLIPS HV SHINY BLACK 1ML BLR", pcs:11300, krt:813600},
{nama:"ELLIPS HV SHINY BLACK 1ML JAR", pcs:78100, krt:937200},
{nama:"ELLIPS HV SMOOTH SHINY 1ML BLR", pcs:11300, krt:813600},
{nama:"ELLIPS HV SMOOTH SHINY 1ML JAR", pcs:78100, krt:937200},
{nama:"ESK COL GEL ADORABLE PINK 100ML BTL", pcs:14650, krt:527400},
{nama:"ESK COL GEL ADORABLE PINK 50ML BTL", pcs:8200, krt:295200},
{nama:"ESK COL GEL AMUSING VANILLA 100ML BTL", pcs:14650, krt:527400},
{nama:"ESK COL GEL AMUSING VANILLA 50ML BTL", pcs:8200, krt:295200},
{nama:"ESK COL GEL CONFIDENT PEACH 100ML BTL", pcs:14650, krt:527400},
{nama:"ESK COL GEL CONFIDENT PEACH 50ML BTL", pcs:8200, krt:295200},
{nama:"ESK COL GEL DREAM DAY 100ML BTL RELAUNCH", pcs:14650, krt:527400},
{nama:"ESK COL GEL DREAM DAY 50ML BTL RELAUNCH", pcs:8200, krt:295200},
{nama:"ESK COL GEL DREAMY BLUE 100ML BTL", pcs:14650, krt:527400},
{nama:"ESK COL GEL DREAMY BLUE 50ML BTL", pcs:8200, krt:295200},
{nama:"ESK COL GEL ENCHANTING WHITE 100ML BTL", pcs:14650, krt:527400},
{nama:"ESK COL GEL ENCHANTING WHITE 50ML BTL", pcs:8200, krt:295200},
{nama:"ESK COL GEL FRIDAY 50ML BTL RELAUNCH", pcs:8200, krt:295200},
{nama:"ESK COL GEL GLAMOROUS RED 100ML BTL", pcs:14650, krt:527400},
{nama:"ESK COL GEL GLAMOROUS RED 50ML BTL", pcs:8200, krt:295200},
{nama:"ESK COL GEL GLEEFUL YELLOW 100ML BTL", pcs:14650, krt:527400},
{nama:"ESK COL GEL GLEEFUL YELLOW 50ML BTL", pcs:8200, krt:295200},
{nama:"ESK COL GEL MONDAY 100ML BTL RELAUNCH", pcs:14650, krt:527400},
{nama:"ESK COL GEL MONDAY 50ML BTL RELAUNCH", pcs:8200, krt:295200},
{nama:"ESK COL GEL ROMANTIC 100ML BTL RELAUNCH", pcs:14650, krt:527400},
{nama:"ESK COL GEL ROMANTIC 50ML BTL RELAUNCH", pcs:8200, krt:295200},
{nama:"ESK COL GEL ROMANTIC PURPLE 100ML BTL", pcs:14650, krt:527400},
{nama:"ESK COL GEL SATURDAY 100ML BTL RELAUNCH", pcs:14650, krt:527400},
{nama:"ESK COL GEL SATURDAY 50ML BTL RELAUNCH", pcs:8200, krt:295200},
{nama:"ESK COL GEL SUNDAY 100ML BTL RELAUNCH", pcs:14650, krt:527400},
{nama:"ESK COL GEL SUNDAY 50ML BTL RELAUNCH", pcs:8200, krt:295200},
{nama:"ESK COL GEL TUESDAY 50ML BTL RELAUNCH", pcs:8200, krt:295200},
{nama:"ESK COL GEL WEDNESDAY 100ML BTL RELAUNCH", pcs:14650, krt:527400},
{nama:"ESK COL GEL WEDNESDAY 50ML BTL RELAUNCH", pcs:8200, krt:295200},
{nama:"ESK DISNEY HAIR BW CLEAN & SMOOTH MICKEY 280ML BTL", pcs:21200, krt:508800},
{nama:"ESK DISNEY HBW MICKEY N FRIEND 200ML PCH", pcs:12800, krt:307200},
{nama:"ESK DISNEY HBW MICKEY N FRIEND 250ML BTL", pcs:20200, krt:484800},
{nama:"ESK DISNEY SHM & COND DONALD 200ML BTL", pcs:14717, krt:529812},
{nama:"ESK DISNEY SHM & COND MICKEY 200ML BTL", pcs:14717, krt:529812},
{nama:"ESK DISNEY SHM & COND MINNIE 100ML BTL", pcs:8000, krt:288000},
{nama:"ESK DISNEY SHM & COND MINNIE 200ML BTL", pcs:14717, krt:529812},
{nama:"ESK DISNEY SPR COL DONALD 100ML", pcs:13700, krt:493200},
{nama:"ESK DISNEY SUNSCREEN STITCH 45GR TUBE", pcs:65000, krt:1560000},
{nama:"ESK HIJAB BODYMIST DAZZ PURPLE 125ML BTL", pcs:16500, krt:594000},
{nama:"ESK HIJAB BODYMIST GREEN FANTASY 125ML BTL", pcs:16500, krt:594000},
{nama:"ESK HIJAB BODYMIST PINK BLOSSOM 125ML BTL", pcs:16500, krt:594000},
{nama:"ESK HIJAB BODYMIST SPARK YELLOW 125ML BTL", pcs:16500, krt:594000},
{nama:"ESK HJB COL GEL FRESH DAY 100ML BTL", pcs:14650, krt:527400},
{nama:"ESK PRINCESS HAIR LOTION SPR 100ML BTL", pcs:15000, krt:360000},
{nama:"ESK PRINCESS HBW NAT SMOOTH SOFIA 280ML BTL", pcs:21200, krt:508800},
{nama:"ESK PRINCESS SHM & COND CINDERELLA 100ML BTL", pcs:8000, krt:288000},
{nama:"ESK PRINCESS SHM & COND RAPUNZEL 200ML BTL", pcs:14717, krt:529812},
{nama:"ESK PRINCESS SHM & COND SNOW WHITE 100ML BTL", pcs:8000, krt:288000},
{nama:"ESK PRINCESS SHM & COND SNOW WHITE 200ML BTL", pcs:14717, krt:529812},
{nama:"ESK PRINCESS SHW GEL CINDERELLA 250ML BTL", pcs:19350, krt:696600},
{nama:"ESK PRINCESS SPL COL BELLE 60ML BTL", pcs:7700, krt:277200},
{nama:"ESK PRINCESS SPL COL RAPUNZEL 125ML BTL", pcs:15439, krt:555804},
{nama:"ESK PRINCESS SPL COL SNOW WHITE 125ML BTL", pcs:15439, krt:555804},
{nama:"ESK SPL COL FIRST DATE 125ML BTL", pcs:16050, krt:577800},
{nama:"ESK SPL COL FIRST LOVE 125ML BTL", pcs:16050, krt:577800},
{nama:"ESK SPR COL AUTUMN BUSAN 110ML BTL", pcs:18872, krt:679392},
{nama:"ESK SPR COL GOOD NIGHT KISS 105ML BTL", pcs:14633, krt:526788},
{nama:"ESK SPR COL SHAKE YOUR BODY 105ML BTL", pcs:14633, krt:526788},
{nama:"ESK SPR COL SPRING SEOUL 110ML BTL", pcs:18872, krt:679392},
{nama:"ESK SPR COL WINTER JEJU 110ML BTL", pcs:18872, krt:679392},
{nama:"M KIDS SHM & COND BATMAN 150ML BTL", pcs:12614, krt:454104},
{nama:"M KIDS SHM & COND IRON MAN 150ML BTL", pcs:12614, krt:454104},
{nama:"M KIDS SHW GEL IRON MAN 175ML BTL", pcs:16200, krt:583200},
{nama:"M KIDS SPR COL BATMAN 100ML BTL", pcs:13319, krt:479484},
{nama:"M KIDS SPR COL BEN10 100ML BTL", pcs:13319, krt:479484},
{nama:"M KIDS SPR COL SUPERMAN 100ML BTL", pcs:13319, krt:479484},
{nama:"M KIDS STYL GEL BATMAN 75GR JAR", pcs:9950, krt:477600},
{nama:"M KIDS STYL GEL SPIDERMAN 75G JAR", pcs:9950, krt:477600},
{nama:"M KIDS STYL GEL SUPERMAN 75GR JAR", pcs:9950, krt:477600},
{nama:"M KIDS T PASTE BATMAN 50GR TUBE", pcs:6700, krt:321600},
{nama:"M KIDS T PASTE IRON MAN 40GR + 10GR TUBE", pcs:6700, krt:321600},
{nama:"M KIDS T PASTE SUPERMAN 40GR + 10GR TUBE", pcs:6700, krt:321600},
{nama:"MASTER SPL COL COOL 150ML BTL", pcs:15000, krt:540000},
{nama:"MASTER SPL COL POWER 150ML BTL", pcs:15000, krt:540000},
{nama:"MASTER SPL COL SPORTY 150ML BTL", pcs:15000, krt:540000},
{nama:"MASTER SPR COL AQUA BLUE 100ML BTL", pcs:15500, krt:558000},
{nama:"MASTER SPR COL BLACK MUSK 100ML BTL", pcs:15500, krt:558000},
{nama:"MASTER SPR COL G.FOUGERE 100ML BTL", pcs:15500, krt:558000},
{nama:"MASTER SPR COL RED WOOD 100ML BTL", pcs:15500, krt:558000},
{nama:"OVALE FAC LOT ANTI ACNE 200ML 2IN1 BTL", pcs:25150, krt:905400},
{nama:"OVALE FAC LOT ANTI ACNE 60ML 2IN1 BTL", pcs:9100, krt:327600},
{nama:"OVALE FAC LOT LEMON 100ML 2IN1 BTL", pcs:15650, krt:563400},
{nama:"OVALE FAC LOT P.LUMI YAM BEAN 100ML BTL", pcs:15650, krt:563400},
{nama:"OVALE FAC LOT P.LUMI YAM BEAN 200ML BTL", pcs:25150, krt:905400},
{nama:"OVALE FAC MASK PWD PEARL 15GR SCH", pcs:7500, krt:1080000},
{nama:"OVALE FACE MASK CUCUMBER 15GR SCH", pcs:7500, krt:1080000},
{nama:"OVALE FACE MASK PWD YAM BEAN 15GR SCH", pcs:7500, krt:1080000},
{nama:"OVALE FACE MASK TOMATO 15GR SCH", pcs:7500, krt:1080000},
{nama:"OVALE LULUR BALI HONEY C 100GR JAR", pcs:16500, krt:396000},
{nama:"OVALE LULUR BALI YAM BEAN 100GR JAR", pcs:16500, krt:396000},
{nama:"OVALE NAT H2O MICELLAR WATER ACNE CARE 100ML", pcs:22000, krt:792000},
{nama:"OVALE NAT H2O MICELLAR WATER BRIGHTENING 100ML", pcs:22000, krt:792000},
{nama:"OVALE REAL CLAY MASK ACNE PRONE 10GR SCH", pcs:7500, krt:1080000},
{nama:"OVALE REAL CLAY MASK DEEP HYDRA 15GR SCH", pcs:7500, krt:1080000},
{nama:"OVALE REAL CLAY MASK H GLOW 15GR SCH", pcs:7500, krt:1080000},
{nama:"OVALE REAL CLAY MASK P. PURIFYING 10GR SCH", pcs:7500, krt:1080000},
{nama:"OVALE REAL CLAY MASK P. PURIFYING 50GR TUBE", pcs:21300, krt:511200},
{nama:"RESIK V MJK 50ML BTL", pcs:8881, krt:639432},
{nama:"RESIK V MJK 90ML BTL", pcs:17106, krt:615816},
{nama:"RESIK V MJK WHITENING 90ML BTL", pcs:18900, krt:680400},
{nama:"RESIK V PKW D SIRIH ANGGREK 90ML BTL", pcs:9350, krt:336600},
{nama:"RESIK V PKW SIRIH KENANGA 90ML BTL", pcs:9350, krt:336600},
{nama:"RESIK V RAM MADURA WHITENING 90ML BTL", pcs:18900, krt:680400},
{nama:"SAMANTHA CREAMBATH GINSENG 30GR SCH", pcs:6000, krt:432000},
{nama:"SAMANTHA HC CHOCOLATE BROWN 25GR BOX", pcs:11000, krt:792000},
{nama:"SAMANTHA HC GOLDEN 25GR BOX", pcs:11000, krt:792000},
{nama:"SAMANTHA HC NATURAL BLACK 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA CREAMBATH AVOCADO 30GR SCH", pcs:6000, krt:432000},
{nama:"SASHA CREAMBATH RYL JELLY 30GR SCH", pcs:6000, krt:432000},
{nama:"SASHA HAIR BLEACHING 10GR BOX", pcs:12000, krt:864000},
{nama:"SASHA HC DS ASH GREY 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC DS DUSTY PINK 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC DS GREEN TOSCA 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC DS SKY BLUE 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC DS SMOKEY LILAC 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC VS BLUE BLACK 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC VS BURGUNDY 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC VS CHOCO BROWN 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC VS COPPER HAZEL 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC VS DARK BLUE 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC VS DARK MAHOGANY BROWN 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC VS GOLDEN 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC VS N.BLACK 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HC VS PASSION RED 25GR BOX", pcs:11000, krt:792000},
{nama:"SASHA HV COLOR GLOW 6C BLR", pcs:8260, krt:594720},
{nama:"SASHA HV VOO DAMAGE CARE BLR", pcs:8260, krt:594720},
{nama:"SASHA TP A.BACTERIAL 150GR TUBE", pcs:13600, krt:489600},
{nama:"SASHA TP WHITENING 65GR TUBE", pcs:6500, krt:312000},
{nama:"SLEEK BABY BTL NIPPLE CLEANSER 150ML BTL", pcs:11000, krt:396000},
{nama:"SLEEK BABY BTL NIPPLE CLEANSER 70ML PCH", pcs:3300, krt:118800},
{nama:"SLEEK BABY BTL NIPPLE CLEANSER 900ML PCH", pcs:45400, krt:544800},
{nama:"SLEEK BABY BTL NIPPLE CLEANSER SLS FREE 450ML PCH", pcs:25600, krt:307200},
{nama:"SLEEK BABY DIAPERS CREAM 80ML TUBE", pcs:27297, krt:982692},
{nama:"SLEEK BABY FABRIC SOFTENER 750ML PCH", pcs:35000, krt:420000},
{nama:"SLEEK BABY SPECIAL PACKAGE", pcs:73900, krt:443400},
{nama:"SLEEK BLD 1200ML BTL", pcs:57200, krt:343200},
{nama:"SLEEK BLD 4LTR GLN", pcs:149100, krt:596400},
{nama:"SLEEK BLD 500ML BTL", pcs:30500, krt:366000},
{nama:"SLEEK BLD SLS FREE 900ML PCH", pcs:35600, krt:427200},
{nama:"KRAFT CHEDDAR LOAF 8 X 2KG", pcs:234451, krt:1875608},
{nama:"KRAFT CHEDDAR MARTABAK NF 8 X 2KG", pcs:177397, krt:1419176},
{nama:"KRAFT CHEDDAR MINI 18 X 8 X 30GR", pcs:4961, krt:714384},
{nama:"KRAFT SINGLES 10S 30 X 150GR", pcs:22596, krt:677880},
{nama:"KRAFT SINGLES 5S 54 X 75GR", pcs:12497, krt:674838},
{nama:"M-150 BOTTLE", pcs:5020, krt:251000},
{nama:"M-150 CAN SLIM", pcs:6542, krt:157008},
{nama:"BISKUAT BITES CHOCOLATE 36 X 35GR", pcs:4840, krt:174240},
{nama:"BISKUAT BITES VANILA 36 X 35GR", pcs:4840, krt:174240},
{nama:"BISKUAT BOLU COKLAT 12 X 12 X 16,6GR", pcs:1951, krt:280944},
{nama:"BISKUAT COKLAT 12 X 4 X 45,6GR", pcs:2957, krt:141936},
{nama:"BISKUAT COKLAT RENO 28 X 106,4GR", pcs:7470, krt:209160},
{nama:"BISKUAT GOLDEN STRAWBERRY 12 X 12 X 35GR", pcs:1909, krt:274896},
{nama:"BISKUAT GOLDEN STRAWBERRY 24 X 105GR", pcs:5503, krt:132072},
{nama:"BISKUAT GOLDEN VANILA 12 X 12 X 35GR", pcs:1909, krt:274896},
{nama:"BISKUAT GOLDEN VANILA 24 X 105GR", pcs:5503, krt:132072},
{nama:"BISKUAT ORIGINAL 12 X 4 X 45,6GR", pcs:2957, krt:141936},
{nama:"BISKUAT ORIGINAL RENO 28 X 106,4GR", pcs:7470, krt:209160},
{nama:"CDM MILK 12 X 24 X 25GR", pcs:8319, krt:2395872},
{nama:"MINI OREO CHOCO 24 X 58,4GR SUP", pcs:7978, krt:191472},
{nama:"MINI OREO STRAW 24 X 58,4GR SUP", pcs:7978, krt:191472},
{nama:"MINI OREO VANILLA 24 X 58,4GR SUP", pcs:7978, krt:191472},
{nama:"OREO C/S/C VANILA 24 X 64,4GR", pcs:5287, krt:126888},
{nama:"OREO CHOCO ACTIVATION 24 X 110,4GR", pcs:8414, krt:201936},
{nama:"OREO CHOCO VANI WAFER 24 X 117GR", pcs:8356, krt:200544},
{nama:"OREO DARK & WHITE CHOC 24 X 110,4GR", pcs:8792, krt:211008},
{nama:"OREO DOUBLE CHOCO WAFER 24 X 117GR", pcs:8356, krt:200544},
{nama:"OREO LUP 2000 CHOCO ACTIVATION 12 X 12 X 36,8GR", pcs:1962, krt:282528},
{nama:"OREO LUP 2000 VANILLA ACTIVATION 12 X 12 X 36,8GR", pcs:1962, krt:282528},
{nama:"OREO PEANUT BUTTER & CHOCO 24 X 110,4GR", pcs:8792, krt:211008},
{nama:"OREO RED VELVET 24 X 110,4GR", pcs:9503, krt:228072},
{nama:"OREO SPACEBURST CREAM 24 X 110,4GR", pcs:7578, krt:181872},
{nama:"OREO STRAW CREAM ACTIVATION 24 X 110,4GR", pcs:8414, krt:201936},
{nama:"OREO VANILLA 24 X 147,2GR", pcs:9487, krt:227688},
{nama:"RITZ CRACKERS 24 X 100GR", pcs:6859, krt:164616},
{nama:"RITZ SANDWICH CHEESE 12 X 12 X 27,3GR ID", pcs:1878, krt:270432}
];
// ====== END DATA ======



function loadOutlet(){
let r = document.getElementById("rute").value;
let sel = document.getElementById("outlet");

sel.innerHTML="";

ruteDB[r].forEach(o=>{
 let op=document.createElement("option");
 op.textContent=o;
 sel.appendChild(op);
});
}

function format(x){
 return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");
}

function tambah(){
let id = Date.now();

let html = `
<div class="row">
<select onchange="hitung()">
<option value="">-- pilih produk --</option>
${produk.map((p,i)=>`
<option value="${i}">${p.nama}</option>
`).join("")}
</select>

<select onchange="hitung()">
<option value="pcs">PCS</option>
<option value="krt">KRT</option>
</select>

<input type="number" value="1" min="1" onkeyup="hitung()" onchange="hitung()">
</div>
`;

document.getElementById("list").insertAdjacentHTML("beforeend",html);
}

function hitung(){
let total = 0;

document.querySelectorAll(".row").forEach(r=>{
 let p = r.children[0].value;
 let satuan = r.children[1].value;
 let qty = r.children[2].value;

 if(p){
   let harga = produk[p][satuan];
   total += harga * qty;
 }
});

document.getElementById("total").innerText = format(total);
}

document.getElementById("tgl").value =
 new Date().toISOString().substr(0,10);

loadOutlet();
</script>
<!-- ====== FITUR TAMBAHAN TANPA MENGUBAH KODE ASLI ====== -->

<div class="app">

<div class="card">
<h3>üìä Progress Rute</h3>
<div id="progressInfo">0 / 0 Outlet</div>
</div>

<div class="card">
<button class="btn" onclick="simpanPerOutlet()">üíæ Simpan Order Outlet</button>
<button class="btn" onclick="kirimLaporanWA()">üì≤ Kirim Laporan WA</button>
<button class="btn" onclick="exportXLS()">üìÅ Export Excel</button>
</div>

</div>

<script>
// ===== STORAGE DATABASE =====
let DB = JSON.parse(localStorage.getItem("SALES_DB") || "{}");

// ===== SIMPAN PER OUTLET =====
function simpanPerOutlet(){

let tgl = document.getElementById("tgl").value;
let rute = document.getElementById("rute").value;
let outlet = document.getElementById("outlet").value;
let total = document.getElementById("total").innerText;

if(!tgl || !outlet){
  alert("Tanggal & outlet wajib diisi");
  return;
}

if(!DB[tgl]) DB[tgl] = {};
if(!DB[tgl][rute]) DB[tgl][rute] = {};

DB[tgl][rute][outlet] = {
  total: total,
  jam: new Date().toLocaleTimeString()
};

localStorage.setItem("SALES_DB", JSON.stringify(DB));

alert("Tersimpan:\n" + outlet);

updateProgress();
}

// ===== PROGRESS RUTE =====
function updateProgress(){

let tgl = document.getElementById("tgl").value;
let rute = document.getElementById("rute").value;

let totalOutlet = ruteDB[rute].length;
let selesai = 0;

if(DB[tgl] && DB[tgl][rute]){
  selesai = Object.keys(DB[tgl][rute]).length;
}

document.getElementById("progressInfo").innerText =
selesai + " / " + totalOutlet + " Outlet";
}

// ===== KIRIM LAPORAN WA =====
function kirimLaporanWA(){

let tgl = document.getElementById("tgl").value;
let rute = document.getElementById("rute").value;

if(!DB[tgl] || !DB[tgl][rute]){
  alert("Belum ada data tersimpan");
  return;
}

let txt = "*LAPORAN SALES*\n";
txt += "Tanggal: " + tgl + "\n";
txt += "Rute: " + rute + "\n\n";

for(let o in DB[tgl][rute]){
 txt += "‚Ä¢ " + o + "\n";
 txt += "  Total: Rp " + DB[tgl][rute][o].total + "\n";
 txt += "  Jam: " + DB[tgl][rute][o].jam + "\n\n";
}

window.open(
 "https://wa.me/?text=" +
 encodeURIComponent(txt)
);
}

// ===== EXPORT EXCEL =====
function exportXLS(){

let csv = "Tanggal,Rute,Outlet,Total,Jam\n";

for(let t in DB){
 for(let r in DB[t]){
  for(let o in DB[t][r]){

   csv +=
   t + "," +
   r + "," +
   o + "," +
   DB[t][r][o].total + "," +
   DB[t][r][o].jam + "\n";

  }
 }
}

let a = document.createElement("a");
a.href = URL.createObjectURL(
 new Blob([csv],{type:"text/csv"})
);

a.download = "laporan_sales.xlsx";
a.click();
}

// auto refresh progress
document.getElementById("rute")
.addEventListener("change", updateProgress);

document.getElementById("tgl")
.addEventListener("change", updateProgress);

setTimeout(updateProgress,500);

</script>
  <!-- ====== TAMBAHAN FITUR DETAIL ITEM + RESET HARIAN ====== -->

<script>

// ===== AMBIL DETAIL ITEM DARI FORM =====
function ambilItemAktif(){

let items = [];

document.querySelectorAll(".row").forEach(r=>{

 let p = r.children[0].value;
 let satuan = r.children[1].value;
 let qty = r.children[2].value;

 if(p){
   items.push({
     nama : produk[p].nama,
     satuan : satuan,
     qty : qty,
     harga : produk[p][satuan],
     subtotal : produk[p][satuan] * qty
   });
 }

});

return items;
}

// ===== OVERRIDE SIMPAN PER OUTLET (DITAMBAH DETAIL) =====
let simpanLama = simpanPerOutlet;

simpanPerOutlet = function(){

let tgl = document.getElementById("tgl").value;
let rute = document.getElementById("rute").value;
let outlet = document.getElementById("outlet").value;
let total = document.getElementById("total").innerText;

let items = ambilItemAktif();

if(!DB[tgl]) DB[tgl] = {};
if(!DB[tgl][rute]) DB[tgl][rute] = {};

DB[tgl][rute][outlet] = {
  total: total,
  jam: new Date().toLocaleTimeString(),
  items: items        // üî• simpan detail item
};

localStorage.setItem("SALES_DB", JSON.stringify(DB));

alert("Tersimpan + detail item:\n" + outlet);

updateProgress();
}

// ===== KIRIM WA DENGAN DETAIL ITEM =====
let kirimWALama = kirimLaporanWA;

kirimLaporanWA = function(){

let tgl = document.getElementById("tgl").value;
let rute = document.getElementById("rute").value;

if(!DB[tgl] || !DB[tgl][rute]){
  alert("Belum ada data tersimpan");
  return;
}

let txt = "*LAPORAN SALES DETAIL*\n";
txt += "Tanggal: " + tgl + "\n";
txt += "Rute: " + rute + "\n\n";

for(let o in DB[tgl][rute]){

 txt += "‚ñ∂ " + o + "\n";

 let data = DB[tgl][rute][o];

 data.items.forEach(i=>{
   txt += "  - " + i.nama + "\n";
   txt += "    " + i.qty + " " + i.satuan +
          " x Rp " + format(i.harga) +
          " = Rp " + format(i.subtotal) + "\n";
 });

 txt += "  TOTAL: Rp " + data.total + "\n";
 txt += "  Jam: " + data.jam + "\n\n";
}

window.open(
 "https://wa.me/?text=" +
 encodeURIComponent(txt)
);
}

// ===== EXPORT EXCEL DETAIL ITEM =====
let exportLama = exportXLS;

exportXLS = function(){

let csv = "Tanggal,Rute,Outlet,Produk,Qty,Satuan,Harga,Subtotal,Total,Jam\n";

for(let t in DB){
 for(let r in DB[t]){
  for(let o in DB[t][r]){

   let data = DB[t][r][o];

   data.items.forEach(i=>{

     csv +=
     t + "," +
     r + "," +
     o + "," +
     i.nama + "," +
     i.qty + "," +
     i.satuan + "," +
     i.harga + "," +
     i.subtotal + "," +
     data.total + "," +
     data.jam + "\n";

   });

  }
 }
}

let a = document.createElement("a");
a.href = URL.createObjectURL(
 new Blob([csv],{type:"text/csv"})
);

a.download = "laporan_detail_sales.xlsx";
a.click();
}

// ===== RESET HARIAN OTOMATIS =====
document.getElementById("tgl")
.addEventListener("change", function(){

// bersihkan form input item
document.getElementById("list").innerHTML = "";
document.getElementById("total").innerText = "0";

// auto update progress
updateProgress();

});

</script>
  <!-- ===== TAMBAHAN FITUR CARI PRODUK TANPA UBAH KODE ASLI ===== -->

<script>

// buat cache option asli
let opsiProdukAsli = produk.map((p,i)=>({
  index:i,
  nama:p.nama
}));

// fungsi filter
function filterProduk(keyword){

 keyword = keyword.toLowerCase();

 let hasil = opsiProdukAsli.filter(p =>
   p.nama.toLowerCase().includes(keyword)
 );

 // update semua select produk yang sedang tampil
 document.querySelectorAll(".row select:first-child")
 .forEach(sel=>{

   let valLama = sel.value;

   sel.innerHTML = `
   <option value="">-- pilih produk --</option>
   ` + hasil.map(p=>`
     <option value="${p.index}">
       ${p.nama}
     </option>
   `).join("");

   // kembalikan pilihan lama kalau masih ada
   if(hasil.find(h=>h.index == valLama)){
     sel.value = valLama;
   }

 });

}

</script>
</body>
</html>
